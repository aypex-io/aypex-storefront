<% @body_id = 'product_details' %>

<div class="container">
  <%= aypex_breadcrumbs(@taxon, '', @product) %>
</div>

<% cache cache_key_for_product do %>
  <div class="container pt-4">
    <div class="row" data-hook="product_show">
      <div class="col-12 col-md-7 col-lg-8" data-hook="product_start">
        <div id="images">
          <%= render partial: 'gallery' %>
        </div>
      </div>

      <div class="col-12 col-md-5 col-lg-4" data-hook="product_end">
        <div id="product-description" data-hook="product_right_part_wrap">
          <h1 class="mt-3 mt-md-0 text-center text-md-start">
            <%= @product.name %>
          </h1>

          <div id="cart_form" data-hook="cart_form">
            <%= render 'cart_form' %>
          </div>

          <div class="my-4 row" data-hook="product_description">
            <div class="col-12">
              <%= render partial: 'description' %>
            </div>

            <div class="col-12" data-hook="product_properties">
              <%= render partial: 'properties' %>
            </div>

            <div class="col-12" data-hook="promotions">
              <%= render partial: 'promotions' %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="no-product-available" class="no-product-available-dropdown">
      <%= render partial: 'aypex/shared/no_product_available' %>
    </div>
  </div>

  <div id="related-products"></div>
  <%= products_structured_data([@product]) %>
<% end %>

<div data-related-products
     data-related-products-id="<%= @product.slug %>"
     data-related-products-enabled="<%= @product.respond_to?(:has_related_products?) %>"></div>
